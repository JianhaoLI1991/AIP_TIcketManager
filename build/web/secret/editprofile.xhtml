<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <f:metadata>
        <f:viewAction action="#{userController.loadUser}"/>
    </f:metadata>
    <h:head>
        <title>Profile Editing</title>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"></link>
        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"></link>
    </h:head>
    <h:body>
        <h:form enctype="multipart/form-data">
            <div class="container-fluid">
                <div class="row" style="background-color: lightgrey;height: 50px;">
                    <div class="pull-right" style="line-height: 50px; margin-right:25px;">
                        <h:link value="view Tickets" outcome="ticketlist?faces-redirect=true" style="margin-right:25px;"></h:link>
                        <h:commandLink value="logout" action="#{userController.logout}"></h:commandLink>
                    </div>
                </div>
                <div class="row"  style="margin-top: 10px;">
                    <div class="col-md-8 col-md-offset-1">
                        <h2 class="col-md-6">Personal information</h2>
                        <table class="table">
                            <tr><th>User Id:</th><td><h:outputText value="#{userController.user.userID}"></h:outputText></td></tr>
                            <tr><th>Image:</th><td><h:graphicImage value="/image" width="400px" height="200px"/></td></tr>
                            <tr><th>Upload new image:</th><td><h:inputFile value="#{userController.user.image}"></h:inputFile></td></tr>
                            <tr><th>Email:</th><td><h:inputText value="#{userController.user.email}" required="true" label="Email" validatorMessage="#{userController.showErrorMessage('The email format is illegal')}">
                                        <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" /></h:inputText></td></tr>
                            <tr><th>Password:</th><td><h:outputText value="#{userController.user.password}"></h:outputText></td></tr>
                            <tr><th>First Name:</th><td><h:inputText value="#{userController.user.firstName}" required="true" label="First Name"></h:inputText></td></tr>
                            <tr><th>Last Name</th><td><h:inputText value="#{userController.user.lastName}" required="true" label="Last Name" ></h:inputText></td></tr>
                            <tr><th>Date of Birth</th><td><h:inputText alt="(yyyy-mm-dd)" class="col-md-6" value="#{userController.user.dob}" required="true" label="Date of Birth"><f:convertDateTime pattern="yyyy-MM-dd"></f:convertDateTime></h:inputText><span style="color: red">(Date Format:YYYY-MM-DD)</span></td></tr>
                            <tr><th>Address</th><td><h:inputText value="#{userController.user.address}" required="true" label="Address"></h:inputText></td></tr>
                            <tr><th>State</th><td><h:inputText value="#{userController.user.state}" required="true" label="State"></h:inputText></td></tr>
                            <tr><th>City</th><td><h:inputText value="#{userController.user.city}" required="true" label="City"></h:inputText></td></tr>
                            <tr><th>Postcode</th><td><h:inputText value="#{userController.user.postcode}" required="true" label="Postcode"></h:inputText></td></tr>
                            <tr><th>Phone</th><td><h:inputText value="#{userController.user.phone}" required="true" label="Phone"></h:inputText></td></tr>
                            <tr><td colspan="2">
                                    <h:inputHidden value="#{userController.user.userID}"/>
                                    <h:button class="btn btn-warming"  value="Cancel" outcome="profile?faces-redirect=true"></h:button>
                                    <h:commandButton class="btn btn-primary pull-right"  value="Update" action="#{userController.updateUser()}"></h:commandButton>
                                </td></tr>
                        </table>
                    </div>
                    <div>
                        <h:messages style="color: red;"/>
                    </div>
                </div>
            </div>
        </h:form>
        <!--Latest compiled and minified JavaScript--> 
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    </h:body>

</html>

